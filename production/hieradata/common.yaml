---
classes:
 - roles::scheduler
profiles::bootstrap::firewall: true
profiles::bootstrap::firewall::purge: false
profiles::bootstrap::puppet: true
profiles::bootstrap::puppet::puppetmaster: puppet.service.consul
profiles::bootstrap::puppet::runinterval: 180
profiles::bootstrap::puppet::splaylimit: 180s
profiles::orchestration::consul: true
profiles::orchestration::consul::client_address: '%{::ipaddress_eth1}'
profiles::orchestration::consul::config:
  retry_join:
    - nomad.scheduler.vagrant
profiles::orchestration::consul::config_defaults:
 client_addr: '%{::ipaddress_eth1}'
 data_dir: /var/lib/consul
 datacenter: services
profiles::orchestration::consul::searchpath:
 - 'service.consul'
profiles::orchestration::consul::name_servers:
 - '%{::ipaddress_eth1}'
 - 10.0.2.3
profiles::orchestration::consul::options: '-bind=%{::ipaddress_eth1} -enable-script-checks -syslog'
profiles::orchestration::consul::resolv: true
profiles::scheduling::nomad::config:
  client:
    enabled: true
    network_interface: eth1
profiles::scheduling::nomad::config_defaults:
 advertise:
   http: '%{::ipaddress_eth1}:4646'
   rpc: '%{::ipaddress_eth1}:4647'
   serf: '%{::ipaddress_eth1}:4648'
 consul:
   address: "%{::ipaddress_eth1}:8500"
 data_dir: /var/lib/nomad
 datacenter: services
 vault:
   enabled: true
   address: 'http://active.vault.service.consul:8200'
   tls_skip_verify: true
...
