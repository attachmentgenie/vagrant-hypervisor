---
classes:
 - roles::scheduler
profiles::bootstrap::firewall: true
profiles::bootstrap::firewall::purge: false
profiles::bootstrap::puppet: true
profiles::bootstrap::puppet::puppetmaster: puppet.scheduler.vagrant
profiles::bootstrap::puppet::runinterval: 180
profiles::bootstrap::puppet::splaylimit: 180s
profiles::bootstrap::resolv: true
profiles::bootstrap::resolv::name_servers:
  - 192.168.45.42
  - 10.0.2.3
profiles::bootstrap::resolv::searchpath:
  - 'service.consul'
profiles::orchestration::consul: true
profiles::orchestration::consul::config:
  retry_join:
    - nomad.scheduler.vagrant
profiles::orchestration::consul::config_defaults:
 advertise_addr: '%{::ipaddress_eth1}'
 data_dir: /var/lib/consul
 datacenter: services
profiles::orchestration::consul::connect: true
profiles::scheduling::nomad::config:
  client:
    enabled: true
    node_class: 'vagrant'
    options:
      "driver.whitelist": 'docker'
    network_interface: eth1
profiles::scheduling::nomad::config_defaults:
 advertise:
   http: '%{::ipaddress_eth1}:4646'
   rpc: '%{::ipaddress_eth1}:4647'
   serf: '%{::ipaddress_eth1}:4648'
 consul:
   address: '127.0.0.1:8500'
 data_dir: /var/lib/nomad
 datacenter: services
 vault:
   enabled: true
   address: 'http://active.vault.service.consul:8200'
   tls_skip_verify: true
...
